<div class="container py-6">

  <h1 class="text-3xl font-bold mb-4 flex items-center gap-2">
    ğŸ‘¨â€ğŸ« Guide Dashboard
  </h1>

  <!-- SEARCH BAR -->
  <div class="mb-4">
    <input type="text" [(ngModel)]="searchText"
           placeholder="Search students..."
           class="form-control rounded-lg shadow-sm" />
  </div>

  <!-- LOADING -->
  <div *ngIf="loading" class="text-center py-10">
    <div class="spinner-border"></div>
    <p class="mt-2">Loading students...</p>
  </div>

  <!-- TABLE -->
  <div *ngIf="!loading">
    <table class="table table-hover table-bordered rounded overflow-hidden shadow-sm bg-white">

      <thead class="table-dark">
        <tr>
          <th>Avatar</th>
          <th>Student Name</th>
          <th>Email</th>
          <th>Product</th>
          <th>Status</th>
          <th>View</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let s of filteredStudents() | slice:(page-1)*pageSize:(page)*pageSize">

          <!-- Avatar -->
          <td>
            <div class="avatar">{{ s.user.fullName.charAt(0).toUpperCase() }}</div>
          </td>

          <td>{{ s.user.fullName }}</td>
          <td>{{ s.user.email }}</td>
          <td>{{ s.product.name }}</td>

          <!-- STATUS BADGE -->
          <td>
            <span class="badge"
                  [ngClass]="{
                    'bg-secondary': s.status == 'created',
                    'bg-primary': s.status == 'paid',
                    'bg-warning': s.status == 'dispatched',
                    'bg-success': s.status == 'completed'
                  }">
              {{ s.status | titlecase }}
            </span>
          </td>

          <td>
            <button class="btn btn-outline-primary btn-sm"
                    [routerLink]="['/guide/student', s._id]">
              View
            </button>
          </td>

        </tr>
      </tbody>

    </table>

    <!-- PAGINATION -->
    <div class="mt-3 d-flex justify-content-between">
      <button class="btn btn-secondary" (click)="prev()" [disabled]="page==1">Previous</button>
      <button class="btn btn-secondary" (click)="next()" [disabled]="page>=totalPages()">Next</button>
    </div>

  </div>

</div>
