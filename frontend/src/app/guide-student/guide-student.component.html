<div class="container py-5" *ngIf="!loading">

  <!-- BACK BUTTON -->
  <button class="btn btn-light mb-4" (click)="goBack()">
    â¬… Back
  </button>

  <div class="row g-4">

    <!-- LEFT: PROFILE CARD -->
    <div class="col-md-4">
      <div class="card shadow-lg rounded-3 border-0 p-4 text-center">

        <!-- Avatar -->
        <div class="mx-auto mb-3"
             style="width: 90px; height: 90px; border-radius: 50%;
                    background: linear-gradient(135deg, #6366f1, #a855f7);
                    display:flex; justify-content:center; align-items:center;
                    font-size: 40px; color:white; font-weight:700;">
          {{ student?.user?.fullName.charAt(0).toUpperCase() }}
        </div>

        <h2 class="fw-bold">{{ student?.user?.fullName }}</h2>
        <p class="text-muted">{{ student?.user?.email }}</p>

        <div class="mt-3">
          <span class="badge px-3 py-2"
            [ngClass]="{
              'bg-secondary': student?.status === 'created',
              'bg-primary': student?.status === 'paid',
              'bg-warning': student?.status === 'dispatched',
              'bg-success': student?.status === 'completed'
            }">
            {{ student?.status | titlecase }}
          </span>
        </div>

        <button class="btn btn-success w-100 mt-4"
                (click)="contactStudent()">
          ğŸ“ Contact Student
        </button>

      </div>
    </div>

    <!-- RIGHT: ORDER DETAILS -->
    <div class="col-md-8">
      <div class="card shadow-lg rounded-3 border-0 p-4">

        <h4 class="mb-3 fw-bold">ğŸ“¦ Purchased Product</h4>

        <div class="p-3 rounded border bg-light">
          <p class="mb-1"><strong>Product:</strong> {{ student?.product?.name }}</p>
          <p class="mb-1"><strong>Price:</strong> â‚¹{{ student?.product?.price }}</p>
          <p class="mb-1"><strong>Quantity:</strong> {{ student?.quantity }}</p>
        </div>

        <hr class="my-4">

        <h4 class="fw-bold">ğŸ§ Student Information</h4>

        <div class="mt-3">
          <p><strong>Name:</strong> {{ student?.user?.fullName }}</p>
          <p><strong>Email:</strong> {{ student?.user?.email }}</p>
          <p><strong>Phone:</strong> {{ student?.user?.phoneNumber }}</p>
          <p><strong>City:</strong> {{ student?.user?.city }}</p>
          <p><strong>State:</strong> {{ student?.user?.state }}</p>
        </div>

      </div>
    </div>
  </div>

</div>

<!-- LOADING SPINNER -->
<div *ngIf="loading" class="text-center py-5">
  <div class="spinner-border"></div>
  <p>Loading...</p>
</div>
